\section{Mathematics of pricing swaptions}
To determine swaptions prices, it is important to understand which things there affects the price of the swaption. 
This chapter simplifies these concepts by explaining interest rates, bonds, swaps, and options, 
and then shows how they come together to determine the price of a swaption.
\subsection{Time value of money}
Understanding the concept of interest rates begins with the fundamental idea that a dollar today holds 
more value than the same dollar in the future. To understand these concept, a discount factor is introduce 
\begin{align*}
    B(t,T) = \text{value at time t of a dollar received at time T}
\end{align*} 
$B(t,T)$ refer to a contract that pays one dollar maturity, T, which can be illustrated as below
\begin{align*}
    t & < T \rightarrow B(t,T) < 1 \\
    t & = T \rightarrow B(t,T) = 1
\end{align*}
The concept "time value of money" it asserts that the value of money today is worth more than
the same amount in the future due to its potential earning capacity, inflation, and risk.
This principle underpins various financial decisions, including investing, borrowing,
and pricing financial instruments. Essentially, it recognizes that a dollar received today can be invested 
and earn interest over time, thereby increasing its value. Conversely, a dollar received in the future
is subject to uncertainty and may not retain its purchasing power due to inflation or other factors.
The discount factor represents the present value of future cash flows, taking into account the time value of money.
It reflects the idea that receiving a certain amount of money in the future is less valuable than receiving 
the same amount today.
\subsection{Zero coupon bonds}
One of the most common applications of the concept "time value of money" is zero coupon bonds. 
By there construction the mechanism of "time value of money" is present. This instrument 
have the common property that they provide the owner with a deterministic cash flow. 
\begin{definition}\label{def:zcb}
    A zero coupon bond with maturity data T, also called a T-bons, is a contract which 
    guarantees the holder one dollar to be paid on the date T. The price at time t of 
    a bond with maturity data T is denoted by p$(t,T)$ \cite{Bjork} 
\end{definition} 
\subsection{The yield curve}
Where the concept "time value of money" and the discount factor are fundamental concepts used to assess the present value of future
cash flows, while the yield curve provides insights into market expectations regarding future interest rates.
Understanding the interplay between these concepts is crucial for making informed investment decisions and pricing
financial instruments. The yield curve is a graphical representation illustrating the interest rates (bond yields) for various maturities.
Yield curve can provide a intuition about future interest rates and give insight in the bond market today. 
The general intuition is that longer-term rates is higher then short-term rates, which in other words means that a
lager premium is expect for lending money over a longer period of time. This case sketches a yield cure with a 
positive slope.
\subsection{Interest rates}
\subsubsection{Spot rates}
The spot rate represents the yield-to-maturity of a zero coupon bond,
while the forward rate refers to the anticipated interest rate in the 
future. The definition for determined spot rates is listed 
below
\begin{definition}\label{def:spot}
    The simple spot rate for $[S,T]$, henceforth referred to as the 
    LIBOR spot rate, is defined as \cite{Bjork} 
    \begin{align*}
        L(t;S,T) = - \frac{p(t,T)-p(t,S)}{(T-S)p(t,T)}
    \end{align*}
\end{definition} 
\subsubsection{Forward rates}
Forward rates play a crucial role in financial markets, particularly in the realm of interest rate analysis and 
derivative pricing. They represent the interest rate applicable to a future period, agreed upon today.
Understanding forward rates requires grasping the concept of forward contracts and the expectations theory of interest rates.
Forward rates can be derived from the yield curve. The yield curve plots the yields of bonds with different maturities.
By analyzing the yield curve, one can infer the implied forward rates for future periods. For example, 
the forward rate between year 1 and year 2 is the rate at which an investor can borrow or lend money for the period
between year 1 and year 2, starting at year 1.
\\\\
Lets consider three time points on the yield curve $t=0,1,2$, where it is assumed
that $t_0 < t_1 < t_2$. At time $t_0$ we have the spot rates $p(t_0,t_1)$ and $p(t_1,t_2)$,
which represent the yields for bonds maturing at time $t_1$ and $t_2$ respectively.
Hence the forward rate, $R(t_1,t_2)$, can med determined using the equation below
\begin{align*}
    R(t_1,t_2)= \frac{(1+p(t_0,t_2))^2}{(1+p(t_0,t_1))}-1
\end{align*}
Imagine investing one dollar in a one-year zero-coupon bond, $B(t_0,t_1)$,
and instantly reinvesting the money received at time $t_1$ in a new one-year zero-coupon bond,
$B(t_1,t_2)$, at rate $R(t_1,t_2)$. This strategy should yield the same return as investing 
one dollar in a two-year zero coupon bond $B(t_0,t_2)$ and holding it for two years. 
This strategy illustrated the idea of forward rates. Let us then look a the general
formula for forward rates. 
\begin{definition}\label{def:forward}
    The continuously compounded forward rate for $[S,T]$ contracted at t is defined
    as \cite{Bjork} 
    \begin{align*}
        R(t;S,T)= - \frac{\log p(t,T)- \log p(t,S)}{(T-S)} 
    \end{align*}
\end{definition} 
\subsection{Financial derivatives}
\subsubsection{Bonds}
A bond is a debt security, like a loan. Borrowers issue bonds to raise money 
from investors willing to lend them money for a certain amount of time.
When you purchase a bond you are lending money to the issuer, which in 
some cases is a government or company. In return, from the construction of the 
bond, the issuer guarantees to pay a predetermined rate during the term of the bond
and repay the principal at maturity. 
\\\\
Earlier a zero coupon bond has ben introduced and when talk about bonds, a zero coupon 
bond is the simplest representation of a bond. The zero coupon bond contract is 
only given by two cash flows. One for the buyer, there pays the issuer at time 
t = $t_0$, and another where the buyer receives the principal at time t = T.
Unlike other types of bonds, a zero coupon bond does not offer periodic 
interest payments (coupons) throughout its term. \cite{Bjork} 
\\\\
The price of a zero coupon bond is represented as 
p(t,T), where an individual lends an amount, K, with the intention of earning a
return in the future. Therefore, the price of a zero coupon bond, with 
its principal (also known as face value) K, at time t and with maturity 
T, is denoted as.
\begin{align*}
    p(t,T)= B(t,T)\cdot K
\end{align*}
\subsubsection{Fixed Coupon Bonds}
As describe a zero coupon bond does not involve coupons throughout the term of the bond. 
But moving forward we will introduce various bond with coupon there are either fixed 
or floating. First we will consider the simplest form of a coupon bond, which is a 
fixed coupon bond. Fixed coupon bonds are a type of debt security that offers investors a predictable
return in the form of regular interest payments, known as coupons, until the bond's maturies.
These coupons are set at a fixed rate at the time of issuance, based on the bond's face value,
and are typically paid annually or semi-annually. Upon reaching maturity, the issuer repays 
the principal amount (face value) to the issuer, concluding the bond contract. The purpose
of a fixed coupon bond is there ability to provide a steady stream of income,
making them an attractive option for conservative investors seeking to minimize risk and 
secure predictable returns.
\\\\
Continuing we will compute the price of a fixed coupon bond. First we note that the fixed coupon bond,
can be replicated by holding a portfolio consisting of zero coupon bond with maturities $T_i$, for 
$i=1,...,n$. So we will hold $c_i$ zero coupon bonds of maturities $T_i$ for $i=1,...,n-1$, and 
$K+c_n$ bonds with maturity $T_n$. Hence we have that the price, p(t), at time t, where $t<T$, of 
the fixed coupon bonds becomes. \cite{Bjork}
\begin{align*}
    p(t) = K \cdot p(t,T_n) + \sum_{i=1}^{n}c_i \cdot p(t,T_i)
\end{align*}
When taking about coupons, there are typically determined in terms of return than in monetary terms.
So the return of the i'th coupon is denoted as a simple rate acting in the face value K, over the
time period $[t_{i-1},T_i]$. So for the i'th coupon the return is equal to $r_i$, and the face value 
is K, hence we have that 
\begin{align*}
    c_i = r_i(T_i-T_{i-1})K
\end{align*}
Where for standardized coupon, the time intervals will be equally spaced, which means that 
\begin{align*}
    T_i = T_0 + i \delta
\end{align*}
This also means the the coupon rates $r_1,...,r_n$ will be equal to a common coupon rate r. 
Hence the price p(t,T) of a fixed coupon bond where $t \leq T_1$ will be determined as below \cite{Bjork}
\begin{align*}
    p(t)= K \Big( p(t,T_n)+ r \delta \sum_{i=1}^{n}\cdot p(t,T_i) \Big)
\end{align*}
\subsubsection{Floating Rate Bonds}
Now a short introduction to fixed coupon bonds has be given, as mentioned there are also many 
type of bonds there have floating coupon. When it is listed that there are bonds there have
floating coupon, what there is really said is that the rate is floating. So with the fixed coupon
bond, the coupon was at predetermined when the agreement was made. But there are also bond, where
the coupon is reset for every coupon period. These types of bond is referred to as floating 
rate bonds. The most simple floating rate bond, is where the coupon rate $r_i$ is set to 
the spot LIBOR rate $L(T_{i-1}, T_i)$. Thus we have that 
\begin{align*}
    c_i = (T_i-T_{i-1})L(T_{i-1},T_i)K
\end{align*}
Here we have that $L(T_{i-1},T_i)$ is determined at time $T_{i-1}$, but the coupon is first 
delivered at time $T_i$. \cite{Bjork}  
\\\\
The LIBOR rate stands for London InterBank Offered Rate, which is a rate the the 
British Bankers Association sets every business day. Like the LIBOR rate, there is many types
of xIBOR rates, one is EURIBOR rate Which is a rate the 
European Banking Federation sets every business day. 
\\\\
These different type of xIBOR rates are sets differently, but they all use the money market convention. 
So when taking about business day, the money market convention is important. This is a day-count 
convention is a standardized methodology for calculating the number of days between two dates.
This means that when $t <T_0$  the coupon dates are equally spaced with  
\begin{align*}
    \delta = T_{i}-T_{i-1}
\end{align*}
To determined the value of a the simplest floating rate bond, the LIBOR spot rate we can without
loss is generality assume that K=1 and insert the Definition \ref{def:spot} of the LIBOR spot rate 
to obtain
\begin{align*}
    c_i &= (T_i-T_{i-1})L(T_{i-1},T_i)K \\
        &= \delta L(T_{i-1},T_i) \\
        &= \frac{1- p(T_{i-1},T_i)}{\delta p(T_{i-1},T_i)} = \frac{1}{p(T_{i-1},T_i)}-1
\end{align*}
This lead to a formula for the floating rate bond, which is listed below \cite{Bjork}
\begin{align*}
    p(t)= p(t,T_n) + \sum_{i=1}^{n}\Big[p(t,T_{i-1})-p(t,T_i)\Big] = p(t,T_0)
\end{align*}
where we note that if $t=T_0$ we get that $p(T_0)=1$
\\\\
This leads to some general assumption there guarantee the existence of a sufficiently 
rich and regular bond market
\begin{assumption}\label{def:market}
    We assume the following
    \begin{itemize}
        \item There exists a (frictionless) market for T-bond for every T>0
        \item The relation p(t,t)= 1 holds for all t
        \item For each fixed t, the bond price p(t,T) is differentiable w.r.t time of maturity T \cite{Bjork}
    \end{itemize}
\end{assumption}
\subsection{Interest rate swaps}
Now some simple cases of different type of bonds has be introduce. Then we will combined the knowledge we have gained to move on
to take interest rate derivatives in consideration. Again we will consider the simplest type of a interest rate derivative, which is a
interest rate swap. The construction of a interest rate swap is that there is exchange a payment stream of a fixed rate of interest,
which is know as the swap rate. This fixed rate is exchange for some floating rate, such as the LIBOR rate. 
As mentioned the fixed rate is know as the swap rate, this swap rate is determined from forward rate extracted from the yield curve, 
so it makes the present value of the swap equal to zero. This we will formulate this later. 
\\\\
As stated in the interest rate swap, two cash flow are exchanged, where one of is a 
fixed cash flow and the other is a floating cash flow. These components of
the interest rate swap are known ad the "fixed leg" and the "floating leg". 
The role of each participant in the swap is determined in relation to the 
fixed leg: the party making fixed payments is engaged in a "payer swap," 
while the party making floating payments (and receiving fixed payments) is
 involved in a "receiver swap."
\\\\
Again we have that K is the principal also know as the face value and we will denote the swap rate, R. Further we have that the payments
arises at the dates $T_1,...,T_n$, this means that at time $T_i$ buyer of the interest rate swap will pay
\begin{align}
    K \delta L(T_{i-1},T_i)
    \label{irs}
\end{align}
where we have that $L(T_{i-1},T_i)$ is the spot rate, which could be the LIBOR spot rate.
  It is also assumed
that the days $T_0,...,T_n$ is equally spaced this $\delta = T_i - T_{i-1}$ as mentioned above in the section for floating rate bonds. 
The it is noticed the expression in \autoref{irs} is the same as $Kc_i$, where again $c_i$ is the i'th coupon for the floating rate. 
So at time $T_i$ the buyer will pay $K \delta R$, where the cash flow at time $T_i$ is given by below
\begin{align*}
    K \delta \Big[L(T_{i-1},T_i)-R \Big]
\end{align*}
Then by applying the results from the section for floating rate bonds again, we are able to compute the value of the 
cash flow at time $t<T_0$. The value of the cash flow is listed below
\begin{align*}
    K p(t,T_{i-1})-K(1+\delta R)p(t,T_i)
\end{align*}
Hence we have that the total value denote by $\Pi(t)$, so the total value at time t of the swap is given as below
\begin{align}
    \pi (t) = K \sum_{i=1}^{n} \Big[p(t,T_{i-1})-(1+ \delta R)p(t,T_i)\Big]
    \label{valueirs}
\end{align}
Moving forward we simplify \autoref{valueirs} in the below Proposition \ref{simple} \cite{Bjork}
\begin{proposition}
    The price, for $t<T_0$, of the swap in \autoref{valueirs} above
    is given by 
    \begin{align*}
        \Pi(t) = K p(t,T_0)-K \sum_{i=1}^{n}d_i p(t,T_i)
    \end{align*}
    where
    \begin{align*}
        d_i &= R \delta, \quad i=1,...,n-1 \\
        d_n &= 1+ R \delta
    \end{align*}
    \label{simple}
\end{proposition}
\noindent 
Earlier we left behind a discussion of how the swap rate, R,  is determined. 
It was noted that the swap is determined such that the present value of
the swap is equal to zero. Now we will give a more accurate of how swap is determined.
\begin{proposition}
    If, by convention, we assume that the the contract is written at $t=0$, 
    the swap rate is given by \cite{Bjork}
    \begin{align*}
        R = \frac{p(0,T_0)-p(0,T_n)}{\delta \sum_{i=1}^{n}p(t,T_i)}
    \end{align*}
\end{proposition}
\noindent 
If we have that $T_0=0$ the formula for the swap rate, R, becomes
\begin{align*}
    R= \frac{1-p(0,T_n)}{\delta \sum_{1}^{n}p(0,T_i)}
\end{align*}
\subsection{Options}
In this section will introduce the framework of options in the over-the-counter-market. 
The purpose of this section is to establish a pricing formula for European call options.
The meaning of introducing pricing of options before introducing swaptions pricing, is that a swaption is  a 
more complex derivative. So the idea is to get a fundamental understanding of pricing derivatives in a more simple case.
\\\\
Firstly, let's clarify what the over-the-counter market (OTC) is. It is  a marketplace where numerous trades occur.
In the OTC market private companies exchange trades, these companies are firms as banks, other 
large financial institutions and funds managers \cite{Hull}. Then we have establish the market where 
options is traded, so moving further we will look in to options contracts. 
\\\\
A call options gives the holder the right to but the underlying asset at a fixed strike price, K, and a 
predetermined time to maturity, T. Where a put option gives the holder the right to sell the underlying asset at a fixed
strike price, K, and a predetermined time to maturity, T. Options contracts come in various types, with the 
most common being the European and American options, followed by Bermudan options. European options can only 
be exercised at the maturity date, while American options can be exercised at any time point upon to the maturity date.
Bermudan options allow exercise at specific predetermined time points.
For the purpose of understanding the basics of options pricing, we will focus on the European option. 
The contract functions, $\Phi$, for European call and put options are as follows.
\begin{align}
    \Phi(x)_{\text{call}} &=  \max[S-K,0] \label{call_function}\\ 
    \Phi(x)_{\text{put}} &= \max [K-S,0] \label{put_function}
\end{align}
where K is the strike price, S denotes the market price of the underlying asset \cite{Bjork}. From \autoref{call_function} and \autoref{put_function} we see
that the value of the contract function can not be negative, since in both cases the contract function is a 
function there takes the maximum of the payoff and zero. So the holder maximum lost is the paid premium. 
\subsubsection{Options pricing}
The next question to be answered is what is the "fair" price of these option, we will denote the price of
the option by $\Pi(t)$. Again to simplify we will consider
the European call option moving forward. To determine the price of a European call potion, we wil use the 
Black-Scholes formula. This requires a review of Risk Neutral Valuation and the Black-Scholes model.
\\\\
Risk Neutral Valuation determine the value of an asset by discounting the expected values of the assets future 
pay-offs at the risk-free rate of return, this formalized in \autoref{rnt} below
\begin{theorem}
    \textbf{(Risk Neutral Valuation)} The arbitrage free price of the claim $\Phi(S_t)$ is given by \\
    $\Pi(t)[\Phi]$=$F(t,S_t)$, where F is given by the formula 
    \begin{align*}
        F(t,s) &= -e^{-r(T-t)} \EE_{t,s}^{\QQ} \Big[\Phi(S_T)\Big]
    \end{align*}
    where the Q-dynamics os S is
    \begin{align*}
        dS_t & = r S_t dt + S_t \sigma(t,S_t) dW^{\QQ} \\
        S_0 & = s 
    \end{align*}
    and $W^{\QQ}$ is a $\QQ$-Wiener process \cite{Bjork}
    \label{rnt}
\end{theorem}
\noindent 
Then Risk Neutral Valuation has be introduced, hence there only thing left before we are able to price a 
European call option, is to establish the model the price in found under. In this case it is the Black-Scholes model.
It consists of two asses, a risk free asset with price process, B, and a stock price with price process, S.
The dynamics of the two assets is listed below
\begin{align*}
    dBt & = rB_t dt \\
    dS_t &= \mu S_tdt + \sigma S_t dW_t
\end{align*}
where the short rate, r, is  a deterministic constant,  $\mu$ and $\sigma$ is two constants. From \autoref{rnt}
(Risk Neutral Valuation) the formulas for determine the arbitrage free price is available. Finally the requirements
for begin able to price a European option is satisfied, hence we have the Black-Scholes Formula below.
\begin{proposition}
    \textbf{(Black-Scholes Formula)} The price of a European call option with strike K and time of maturity T 
    is given by the formula $\Pi$ = $F(t,S_t)$
    \begin{align*}
        F(t,S_t) & =s N[d_1(t,s)] -e^{-r(T-t)}KN[d_2(t,s)]  
    \end{align*}
    Here N is the cumulative distribution function for the N$[0,1]$ distribution and 
    \begin{align*}
        d_1(t,s) &= \frac{1}{\sigma \sqrt{T-t}} \Big[ \ln \Big(\frac{s}{K} \Big) +  \Big(r + \frac{1}{2} \sigma^2)(T-t)  \Big] \\
        d_2(t,s) &= d_1(t,s)-\sigma \sqrt{T-t}
    \end{align*}
    \cite{Bjork}
\end{proposition}

\subsection{Swaptions}